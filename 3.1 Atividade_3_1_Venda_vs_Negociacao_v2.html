<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atividade 3.1 - Venda vs Negocia√ß√£o | ANC</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --azul-principal: #1e3a5f;
            --azul-claro: #2d5a87;
            --vermelho-principal: #c41e3a;
            --verde: #27ae60;
            --verde-claro: #2ecc71;
            --amarelo: #f39c12;
            --roxo: #9b59b6;
            --laranja: #e67e22;
            --cinza-fundo: #f8f9fa;
            --cinza-borda: #dee2e6;
            --branco: #ffffff;
            --texto-escuro: #212529;
            --texto-medio: #495057;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Source Sans Pro', sans-serif;
            background: linear-gradient(135deg, var(--azul-principal) 0%, var(--azul-claro) 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container { max-width: 900px; margin: 0 auto; }

        .header {
            text-align: center;
            color: var(--branco);
            margin-bottom: 30px;
        }

        .header-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 8px 20px;
            border-radius: 30px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .header p { opacity: 0.9; font-size: 1.1rem; }

        /* Cards */
        .card {
            background: var(--branco);
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
            margin-bottom: 25px;
        }

        .card-header {
            background: linear-gradient(135deg, var(--azul-principal), var(--azul-claro));
            color: var(--branco);
            padding: 20px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-header h2 {
            font-family: 'Playfair Display', serif;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-salvamento {
            font-size: 0.85rem;
            color: rgba(255,255,255,0.8);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .status-salvamento.visivel { opacity: 1; }

        .card-body { padding: 25px; }

        /* Identifica√ß√£o */
        .identificacao-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .campo { display: flex; flex-direction: column; }

        .campo label {
            font-weight: 600;
            color: var(--azul-principal);
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .campo input {
            padding: 10px 12px;
            border: 2px solid var(--cinza-borda);
            border-radius: 8px;
            font-size: 0.95rem;
            font-family: 'Source Sans Pro', sans-serif;
            transition: all 0.3s ease;
        }

        .campo input:focus {
            outline: none;
            border-color: var(--azul-claro);
            box-shadow: 0 0 0 3px rgba(45, 90, 135, 0.1);
        }

        /* Intro Box */
        .intro-box {
            background: #e8f4fd;
            border-left: 4px solid var(--azul-claro);
            padding: 20px;
            border-radius: 0 8px 8px 0;
            margin-bottom: 20px;
        }

        .intro-box h3 {
            font-family: 'Playfair Display', serif;
            color: var(--azul-principal);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .intro-box p { color: var(--texto-medio); line-height: 1.6; }

        /* Concept Grid */
        .concept-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .concept-box {
            padding: 20px;
            border-radius: 12px;
            border: 2px solid;
        }

        .concept-venda {
            background: #e8f8f5;
            border-color: var(--verde);
        }

        .concept-negociacao {
            background: #fdf2e9;
            border-color: var(--laranja);
        }

        .concept-box h4 {
            font-family: 'Playfair Display', serif;
            font-size: 1.1rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .concept-venda h4 { color: var(--verde); }
        .concept-negociacao h4 { color: var(--laranja); }

        .concept-box ul { list-style: none; padding-left: 0; }

        .concept-box li {
            padding: 6px 0 6px 20px;
            position: relative;
            color: var(--texto-medio);
            font-size: 0.95rem;
        }

        .concept-box li::before {
            content: '‚úì';
            position: absolute;
            left: 0;
            font-weight: bold;
        }

        .concept-venda li::before { color: var(--verde); }
        .concept-negociacao li::before { color: var(--laranja); }

        /* Progress Bar */
        .progress-container {
            background: var(--cinza-fundo);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .progress-stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 15px;
            text-align: center;
        }

        .stat-item h4 {
            font-size: 2rem;
            color: var(--azul-principal);
        }

        .stat-item span { font-size: 0.85rem; color: var(--texto-medio); }
        .stat-item.venda h4 { color: var(--verde); }
        .stat-item.negociacao h4 { color: var(--laranja); }

        .progress-bar-bg {
            height: 12px;
            background: var(--cinza-borda);
            border-radius: 6px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--verde), var(--laranja));
            border-radius: 6px;
            transition: width 0.5s ease;
            width: 0%;
        }

        /* Situation Entry */
        .situation-entry {
            background: var(--cinza-fundo);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .situation-entry:hover { border-color: var(--azul-claro); }
        .situation-entry.completed { border-color: var(--verde); background: #f0fff4; }

        .entry-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .entry-number {
            background: var(--azul-principal);
            color: var(--branco);
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .entry-type {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .entry-type.venda { color: var(--verde); }
        .entry-type.negociacao { color: var(--laranja); }

        /* Form Groups */
        .form-group { margin-bottom: 15px; }

        .form-group label {
            display: block;
            font-weight: 600;
            color: var(--texto-escuro);
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--cinza-borda);
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--azul-claro);
        }

        .form-group textarea { min-height: 80px; resize: vertical; }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        /* Reflection Box */
        .reflection-box {
            background: linear-gradient(135deg, #f5eef8, #ebdef0);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .reflection-box h4 {
            font-family: 'Playfair Display', serif;
            color: var(--roxo);
            margin-bottom: 15px;
        }

        .reflection-questions {
            list-style: none;
            padding-left: 0;
        }

        .reflection-questions li {
            padding: 8px 0 8px 25px;
            position: relative;
            color: var(--texto-medio);
        }

        .reflection-questions li::before {
            content: 'ü§î';
            position: absolute;
            left: 0;
        }

        /* Buttons */
        .btn-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 50px;
            font-family: 'Source Sans Pro', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--azul-principal), var(--azul-claro));
            color: var(--branco);
            box-shadow: 0 4px 15px rgba(30, 58, 95, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(30, 58, 95, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--verde), var(--verde-claro));
            color: var(--branco);
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4);
        }

        .btn-secondary {
            background: var(--branco);
            color: var(--texto-medio);
            border: 2px solid var(--cinza-borda);
        }

        .btn-secondary:hover { background: var(--cinza-fundo); }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-overlay.active { display: flex; }

        .modal {
            background: var(--branco);
            border-radius: 16px;
            max-width: 700px;
            width: 90%;
            max-height: 80vh;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--azul-principal), var(--azul-claro));
            color: var(--branco);
            padding: 20px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 { font-family: 'Playfair Display', serif; font-size: 1.3rem; }
        .modal-close { background: none; border: none; color: var(--branco); font-size: 1.5rem; cursor: pointer; }

        .modal-body { padding: 25px; max-height: 50vh; overflow-y: auto; }
        .modal-body textarea {
            width: 100%;
            min-height: 300px;
            padding: 15px;
            border: 2px solid var(--cinza-borda);
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
        }

        .modal-footer {
            padding: 20px 25px;
            background: var(--cinza-fundo);
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .btn-copiar { background: var(--verde); color: var(--branco); }
        .btn-download { background: var(--azul-principal); color: var(--branco); }

        /* Footer */
        .footer {
            text-align: center;
            color: rgba(255,255,255,0.8);
            padding: 30px 20px;
            font-size: 0.9rem;
        }

        /* Print */
        @media print {
            @page { size: A4; margin: 10mm; }
            body { background: white !important; padding: 0; }
            .card { box-shadow: none; border: 1px solid var(--cinza-borda); }
            .btn-group, .footer, .modal-overlay { display: none !important; }
            .print-info { display: block !important; }
        }

        .print-info { display: none; text-align: center; font-size: 8pt; margin-top: 20px; }

        /* Responsive */
        @media (max-width: 768px) {
            .concept-grid, .form-row { grid-template-columns: 1fr; }
            .btn-group { flex-direction: column; }
            .identificacao-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-badge">Atividade Pr√°tica 3.1</div>
            <h1>üîÑ Venda vs Negocia√ß√£o</h1>
            <p>Identifique e diferencie situa√ß√µes reais da sua experi√™ncia</p>
        </div>

        <!-- Card de Identifica√ß√£o -->
        <div class="card">
            <div class="card-header">
                <h2>üìù Identifica√ß√£o</h2>
                <span class="status-salvamento" id="statusSalvamento">üíæ Salvo automaticamente</span>
            </div>
            <div class="card-body">
                <div class="identificacao-grid">
                    <div class="campo">
                        <label for="negociador">Seu Nome</label>
                        <input type="text" id="negociador" placeholder="Nome completo">
                    </div>
                    <div class="campo">
                        <label for="empresa">Empresa / √Årea</label>
                        <input type="text" id="empresa" placeholder="Onde voc√™ trabalha">
                    </div>
                    <div class="campo">
                        <label for="dataAtividade">Data</label>
                        <input type="date" id="dataAtividade">
                    </div>
                    <div class="campo">
                        <label for="experiencia">Tempo de Experi√™ncia</label>
                        <input type="text" id="experiencia" placeholder="Ex: 5 anos em vendas">
                    </div>
                </div>
            </div>
        </div>

        <!-- Card Conceitual -->
        <div class="card">
            <div class="card-header">
                <h2>üìö Conceitos-Chave</h2>
            </div>
            <div class="card-body">
                <div class="intro-box">
                    <h3>üéØ Objetivo da Atividade</h3>
                    <p>Analise situa√ß√µes reais da sua experi√™ncia profissional e classifique-as corretamente como VENDA ou NEGOCIA√á√ÉO. Isso vai ajudar voc√™ a identificar quando usar cada abordagem no dia a dia.</p>
                </div>

                <div class="concept-grid">
                    <div class="concept-box concept-venda">
                        <h4>üíº VENDA</h4>
                        <ul>
                            <li>Foco em criar valor e despertar desejo</li>
                            <li>Apresentar benef√≠cios e solu√ß√µes</li>
                            <li>Entender necessidades do cliente</li>
                            <li>Construir relacionamento e confian√ßa</li>
                            <li>Conduzir o cliente at√© o "sim"</li>
                        </ul>
                    </div>
                    <div class="concept-box concept-negociacao">
                        <h4>ü§ù NEGOCIA√á√ÉO</h4>
                        <ul>
                            <li>Foco em ajustar condi√ß√µes e termos</li>
                            <li>Cliente j√° decidiu comprar</li>
                            <li>Discuss√£o de pre√ßo, prazo, escopo</li>
                            <li>Troca de concess√µes (dar e receber)</li>
                            <li>Buscar acordo satisfat√≥rio para ambos</li>
                        </ul>
                    </div>
                </div>

                <div class="progress-container">
                    <div class="progress-stats">
                        <div class="stat-item venda">
                            <h4 id="vendaCount">0</h4>
                            <span>Situa√ß√µes de Venda</span>
                        </div>
                        <div class="stat-item">
                            <h4 id="totalCount">0</h4>
                            <span>Total Preenchido</span>
                        </div>
                        <div class="stat-item negociacao">
                            <h4 id="negociacaoCount">0</h4>
                            <span>Situa√ß√µes de Negocia√ß√£o</span>
                        </div>
                    </div>
                    <div class="progress-bar-bg">
                        <div class="progress-bar-fill" id="progressBar"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Card Situa√ß√µes de Venda -->
        <div class="card">
            <div class="card-header" style="background: linear-gradient(135deg, #27ae60, #2ecc71);">
                <h2>üíº Situa√ß√µes de VENDA</h2>
            </div>
            <div class="card-body">
                <p style="color: var(--texto-medio); margin-bottom: 20px;">Descreva 3 situa√ß√µes onde voc√™ estava no processo de VENDA (convencendo, apresentando valor, despertando interesse):</p>

                <div class="situation-entry" id="venda1">
                    <div class="entry-header">
                        <div class="entry-number" style="background: var(--verde);">1</div>
                        <span class="entry-type venda">VENDA</span>
                    </div>
                    <div class="form-group">
                        <label>üìã Descreva a situa√ß√£o:</label>
                        <textarea id="vendaSituacao1" placeholder="Ex: Cliente novo que n√£o conhecia nossa solu√ß√£o..."></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>üë§ Cliente:</label>
                            <input type="text" id="vendaCliente1" placeholder="Nome ou segmento">
                        </div>
                        <div class="form-group">
                            <label>üéØ Qual era o desafio?</label>
                            <input type="text" id="vendaDesafio1" placeholder="Ex: Gerar interesse, superar desconfian√ßa...">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>‚úÖ Como voc√™ criou valor?</label>
                        <textarea id="vendaValor1" placeholder="Ex: Mostrei cases de sucesso, fiz demonstra√ß√£o personalizada..."></textarea>
                    </div>
                </div>

                <div class="situation-entry" id="venda2">
                    <div class="entry-header">
                        <div class="entry-number" style="background: var(--verde);">2</div>
                        <span class="entry-type venda">VENDA</span>
                    </div>
                    <div class="form-group">
                        <label>üìã Descreva a situa√ß√£o:</label>
                        <textarea id="vendaSituacao2" placeholder="Descreva outra situa√ß√£o de venda..."></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>üë§ Cliente:</label>
                            <input type="text" id="vendaCliente2" placeholder="Nome ou segmento">
                        </div>
                        <div class="form-group">
                            <label>üéØ Qual era o desafio?</label>
                            <input type="text" id="vendaDesafio2" placeholder="Ex: Gerar interesse, superar desconfian√ßa...">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>‚úÖ Como voc√™ criou valor?</label>
                        <textarea id="vendaValor2" placeholder="Descreva como criou valor..."></textarea>
                    </div>
                </div>

                <div class="situation-entry" id="venda3">
                    <div class="entry-header">
                        <div class="entry-number" style="background: var(--verde);">3</div>
                        <span class="entry-type venda">VENDA</span>
                    </div>
                    <div class="form-group">
                        <label>üìã Descreva a situa√ß√£o:</label>
                        <textarea id="vendaSituacao3" placeholder="Descreva uma terceira situa√ß√£o de venda..."></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>üë§ Cliente:</label>
                            <input type="text" id="vendaCliente3" placeholder="Nome ou segmento">
                        </div>
                        <div class="form-group">
                            <label>üéØ Qual era o desafio?</label>
                            <input type="text" id="vendaDesafio3" placeholder="Ex: Gerar interesse, superar desconfian√ßa...">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>‚úÖ Como voc√™ criou valor?</label>
                        <textarea id="vendaValor3" placeholder="Descreva como criou valor..."></textarea>
                    </div>
                </div>
            </div>
        </div>

        <!-- Card Situa√ß√µes de Negocia√ß√£o -->
        <div class="card">
            <div class="card-header" style="background: linear-gradient(135deg, #e67e22, #f39c12);">
                <h2>ü§ù Situa√ß√µes de NEGOCIA√á√ÉO</h2>
            </div>
            <div class="card-body">
                <p style="color: var(--texto-medio); margin-bottom: 20px;">Descreva 3 situa√ß√µes onde voc√™ estava em NEGOCIA√á√ÉO (ajustando condi√ß√µes, fazendo trocas, chegando a um acordo):</p>

                <div class="situation-entry" id="negociacao1">
                    <div class="entry-header">
                        <div class="entry-number" style="background: var(--laranja);">1</div>
                        <span class="entry-type negociacao">NEGOCIA√á√ÉO</span>
                    </div>
                    <div class="form-group">
                        <label>üìã Descreva a situa√ß√£o:</label>
                        <textarea id="negociacaoSituacao1" placeholder="Ex: Cliente j√° queria comprar, mas pediu desconto..."></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>üë§ Cliente:</label>
                            <input type="text" id="negociacaoCliente1" placeholder="Nome ou segmento">
                        </div>
                        <div class="form-group">
                            <label>‚ö° Qual era o conflito?</label>
                            <input type="text" id="negociacaoConflito1" placeholder="Ex: Pre√ßo, prazo, escopo...">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>üîÑ Como foi resolvido? (concess√µes de cada lado)</label>
                        <textarea id="negociacaoResolucao1" placeholder="Ex: Ofereci 10% de desconto em troca de contrato de 12 meses..."></textarea>
                    </div>
                </div>

                <div class="situation-entry" id="negociacao2">
                    <div class="entry-header">
                        <div class="entry-number" style="background: var(--laranja);">2</div>
                        <span class="entry-type negociacao">NEGOCIA√á√ÉO</span>
                    </div>
                    <div class="form-group">
                        <label>üìã Descreva a situa√ß√£o:</label>
                        <textarea id="negociacaoSituacao2" placeholder="Descreva outra situa√ß√£o de negocia√ß√£o..."></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>üë§ Cliente:</label>
                            <input type="text" id="negociacaoCliente2" placeholder="Nome ou segmento">
                        </div>
                        <div class="form-group">
                            <label>‚ö° Qual era o conflito?</label>
                            <input type="text" id="negociacaoConflito2" placeholder="Ex: Pre√ßo, prazo, escopo...">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>üîÑ Como foi resolvido? (concess√µes de cada lado)</label>
                        <textarea id="negociacaoResolucao2" placeholder="Descreva como chegaram a um acordo..."></textarea>
                    </div>
                </div>

                <div class="situation-entry" id="negociacao3">
                    <div class="entry-header">
                        <div class="entry-number" style="background: var(--laranja);">3</div>
                        <span class="entry-type negociacao">NEGOCIA√á√ÉO</span>
                    </div>
                    <div class="form-group">
                        <label>üìã Descreva a situa√ß√£o:</label>
                        <textarea id="negociacaoSituacao3" placeholder="Descreva uma terceira situa√ß√£o de negocia√ß√£o..."></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>üë§ Cliente:</label>
                            <input type="text" id="negociacaoCliente3" placeholder="Nome ou segmento">
                        </div>
                        <div class="form-group">
                            <label>‚ö° Qual era o conflito?</label>
                            <input type="text" id="negociacaoConflito3" placeholder="Ex: Pre√ßo, prazo, escopo...">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>üîÑ Como foi resolvido? (concess√µes de cada lado)</label>
                        <textarea id="negociacaoResolucao3" placeholder="Descreva como chegaram a um acordo..."></textarea>
                    </div>
                </div>
            </div>
        </div>

        <!-- Card de Reflex√£o -->
        <div class="card">
            <div class="card-header" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);">
                <h2>üí≠ Reflex√£o Final</h2>
            </div>
            <div class="card-body">
                <div class="reflection-box">
                    <h4>ü§î Perguntas para Reflex√£o</h4>
                    <ul class="reflection-questions">
                        <li>Em alguma situa√ß√£o voc√™ come√ßou a negociar antes de ter vendido completamente?</li>
                        <li>Houve casos onde voc√™ confundiu venda com negocia√ß√£o ou vice-versa?</li>
                        <li>Que impacto isso teve no resultado (margem, relacionamento, fechamento)?</li>
                        <li>O que voc√™ faria diferente sabendo distinguir os dois processos?</li>
                    </ul>
                </div>

                <div class="form-group">
                    <label>üìù Suas principais conclus√µes:</label>
                    <textarea id="conclusoes" style="min-height: 120px;" placeholder="Escreva aqui seus insights e aprendizados ap√≥s analisar suas situa√ß√µes de venda e negocia√ß√£o..."></textarea>
                </div>

                <div class="form-group">
                    <label>üéØ Uma a√ß√£o concreta que voc√™ vai implementar:</label>
                    <textarea id="acaoConcreta" placeholder="Ex: Antes de discutir pre√ßo, vou sempre garantir que o cliente entendeu completamente o valor da minha solu√ß√£o..."></textarea>
                </div>

                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="limparFormulario()">üóëÔ∏è Limpar</button>
                    <button class="btn btn-success" onclick="imprimirPDF()">üñ®Ô∏è Imprimir / PDF</button>
                    <button class="btn btn-success" onclick="abrirModalExportacao()">üì§ Exportar JSON</button>
                </div>
            </div>
        </div>

        <!-- Print Info -->
        <div class="print-info">
            <strong>Negocia√ß√£o para Vendas: M√©todo do Professor</strong><br>
            Prof. Paulo H. Donassolo | Atividade 3.1 - Venda vs Negocia√ß√£o<br>
            Gerado em: <span id="print-data"></span>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p><strong>Atividade Pr√°tica | M√≥dulo 3 - Negocia√ß√£o vs Vendas</strong></p>
            <p>Negocia√ß√£o para Vendas: M√©todo do Professor | Prof. Paulo H. Donassolo</p>
        </div>
    </div>

    <!-- Modal Exporta√ß√£o -->
    <div class="modal-overlay" id="modalExportacao">
        <div class="modal">
            <div class="modal-header">
                <h3>üì§ Exportar Atividade (JSON)</h3>
                <button class="modal-close" onclick="fecharModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 15px; color: var(--texto-medio);">Copie o conte√∫do ou clique em "Baixar Arquivo".</p>
                <textarea id="jsonOutput" readonly></textarea>
            </div>
            <div class="modal-footer">
                <button class="btn btn-copiar" onclick="copiarJSON()">üìã Copiar</button>
                <button class="btn btn-download" onclick="baixarJSON()">üíæ Baixar</button>
            </div>
        </div>
    </div>

    <script>
        // Estado
        const STORAGE_KEY = 'anc_atividade_3_1_venda_negociacao';
        let dadosExportacao = null;

        // Atualizar progresso
        function updateProgress() {
            let vendaCount = 0;
            let negociacaoCount = 0;
            let totalFields = 0;
            let filledFields = 0;

            // Contar vendas
            for (let i = 1; i <= 3; i++) {
                const situacao = document.getElementById(`vendaSituacao${i}`).value;
                const cliente = document.getElementById(`vendaCliente${i}`).value;
                const desafio = document.getElementById(`vendaDesafio${i}`).value;
                const valor = document.getElementById(`vendaValor${i}`).value;

                totalFields += 4;
                if (situacao.trim().length > 10) { filledFields++; }
                if (cliente.trim().length > 2) { filledFields++; }
                if (desafio.trim().length > 2) { filledFields++; }
                if (valor.trim().length > 10) { filledFields++; }

                if (situacao.trim().length > 10) {
                    vendaCount++;
                    document.getElementById(`venda${i}`).classList.add('completed');
                } else {
                    document.getElementById(`venda${i}`).classList.remove('completed');
                }
            }

            // Contar negocia√ß√µes
            for (let i = 1; i <= 3; i++) {
                const situacao = document.getElementById(`negociacaoSituacao${i}`).value;
                const cliente = document.getElementById(`negociacaoCliente${i}`).value;
                const conflito = document.getElementById(`negociacaoConflito${i}`).value;
                const resolucao = document.getElementById(`negociacaoResolucao${i}`).value;

                totalFields += 4;
                if (situacao.trim().length > 10) { filledFields++; }
                if (cliente.trim().length > 2) { filledFields++; }
                if (conflito.trim().length > 2) { filledFields++; }
                if (resolucao.trim().length > 10) { filledFields++; }

                if (situacao.trim().length > 10) {
                    negociacaoCount++;
                    document.getElementById(`negociacao${i}`).classList.add('completed');
                } else {
                    document.getElementById(`negociacao${i}`).classList.remove('completed');
                }
            }

            // Atualizar contadores
            document.getElementById('vendaCount').textContent = vendaCount;
            document.getElementById('negociacaoCount').textContent = negociacaoCount;
            document.getElementById('totalCount').textContent = vendaCount + negociacaoCount;

            // Atualizar barra
            const progress = Math.min((filledFields / totalFields) * 100, 100);
            document.getElementById('progressBar').style.width = progress + '%';

            autoSave();
        }

        // Auto-save
        function mostrarStatusSalvamento() {
            const status = document.getElementById('statusSalvamento');
            status.classList.add('visivel');
            setTimeout(() => status.classList.remove('visivel'), 2000);
        }

        function coletarDados() {
            const vendas = [];
            const negociacoes = [];

            for (let i = 1; i <= 3; i++) {
                vendas.push({
                    situacao: document.getElementById(`vendaSituacao${i}`).value,
                    cliente: document.getElementById(`vendaCliente${i}`).value,
                    desafio: document.getElementById(`vendaDesafio${i}`).value,
                    valor: document.getElementById(`vendaValor${i}`).value
                });

                negociacoes.push({
                    situacao: document.getElementById(`negociacaoSituacao${i}`).value,
                    cliente: document.getElementById(`negociacaoCliente${i}`).value,
                    conflito: document.getElementById(`negociacaoConflito${i}`).value,
                    resolucao: document.getElementById(`negociacaoResolucao${i}`).value
                });
            }

            return {
                _meta: { tipo: "atividade_3_1_venda_vs_negociacao", versao: "1.0", exportadoEm: new Date().toISOString() },
                identificacao: {
                    negociador: document.getElementById('negociador').value,
                    empresa: document.getElementById('empresa').value,
                    dataAtividade: document.getElementById('dataAtividade').value,
                    experiencia: document.getElementById('experiencia').value
                },
                situacoesVenda: vendas,
                situacoesNegociacao: negociacoes,
                reflexao: {
                    conclusoes: document.getElementById('conclusoes').value,
                    acaoConcreta: document.getElementById('acaoConcreta').value
                }
            };
        }

        function autoSave() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(coletarDados()));
            mostrarStatusSalvamento();
        }

        function carregarDados() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                try {
                    const d = JSON.parse(saved);

                    if (d.identificacao) {
                        if (d.identificacao.negociador) document.getElementById('negociador').value = d.identificacao.negociador;
                        if (d.identificacao.empresa) document.getElementById('empresa').value = d.identificacao.empresa;
                        if (d.identificacao.dataAtividade) document.getElementById('dataAtividade').value = d.identificacao.dataAtividade;
                        if (d.identificacao.experiencia) document.getElementById('experiencia').value = d.identificacao.experiencia;
                    }

                    if (d.situacoesVenda) {
                        d.situacoesVenda.forEach((v, i) => {
                            const idx = i + 1;
                            if (v.situacao) document.getElementById(`vendaSituacao${idx}`).value = v.situacao;
                            if (v.cliente) document.getElementById(`vendaCliente${idx}`).value = v.cliente;
                            if (v.desafio) document.getElementById(`vendaDesafio${idx}`).value = v.desafio;
                            if (v.valor) document.getElementById(`vendaValor${idx}`).value = v.valor;
                        });
                    }

                    if (d.situacoesNegociacao) {
                        d.situacoesNegociacao.forEach((n, i) => {
                            const idx = i + 1;
                            if (n.situacao) document.getElementById(`negociacaoSituacao${idx}`).value = n.situacao;
                            if (n.cliente) document.getElementById(`negociacaoCliente${idx}`).value = n.cliente;
                            if (n.conflito) document.getElementById(`negociacaoConflito${idx}`).value = n.conflito;
                            if (n.resolucao) document.getElementById(`negociacaoResolucao${idx}`).value = n.resolucao;
                        });
                    }

                    if (d.reflexao) {
                        if (d.reflexao.conclusoes) document.getElementById('conclusoes').value = d.reflexao.conclusoes;
                        if (d.reflexao.acaoConcreta) document.getElementById('acaoConcreta').value = d.reflexao.acaoConcreta;
                    }

                    updateProgress();
                } catch (e) { console.error('Erro ao carregar:', e); }
            }
        }

        function limparFormulario() {
            if (confirm('Tem certeza que deseja limpar todo o formul√°rio?')) {
                document.querySelectorAll('textarea, input[type="text"]').forEach(el => el.value = '');
                document.querySelectorAll('.situation-entry').forEach(el => el.classList.remove('completed'));
                updateProgress();
                localStorage.removeItem(STORAGE_KEY);
            }
        }

        // Modal
        function abrirModalExportacao() {
            dadosExportacao = coletarDados();
            document.getElementById('jsonOutput').value = JSON.stringify(dadosExportacao, null, 2);
            document.getElementById('modalExportacao').classList.add('active');
        }

        function fecharModal() { document.getElementById('modalExportacao').classList.remove('active'); }

        function copiarJSON() {
            const textarea = document.getElementById('jsonOutput');
            textarea.select();
            navigator.clipboard.writeText(textarea.value).then(() => alert('JSON copiado!')).catch(() => { document.execCommand('copy'); alert('JSON copiado!'); });
        }

        function baixarJSON() {
            try {
                const blob = new Blob([JSON.stringify(dadosExportacao, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `venda_vs_negociacao_${document.getElementById('negociador').value.replace(/\s+/g, '_') || 'atividade'}_${new Date().toISOString().slice(0,10)}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                fecharModal();
            } catch (err) { alert('Para baixar, copie o conte√∫do e cole em um arquivo .json'); }
        }

        function imprimirPDF() {
            document.getElementById('print-data').textContent = new Date().toLocaleDateString('pt-BR');
            window.print();
        }

        // Eventos
        document.addEventListener('keydown', e => { if (e.key === 'Escape') fecharModal(); });
        document.getElementById('modalExportacao').addEventListener('click', e => { if (e.target === document.getElementById('modalExportacao')) fecharModal(); });

        document.querySelectorAll('input, textarea').forEach(el => {
            el.addEventListener('input', updateProgress);
        });

        document.addEventListener('DOMContentLoaded', function() {
            carregarDados();
            if (!document.getElementById('dataAtividade').value) {
                document.getElementById('dataAtividade').value = new Date().toISOString().split('T')[0];
            }
            updateProgress();
        });
    </script>
</body>
</html>
